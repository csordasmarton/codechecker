<div class="mx-2">
  <report-filter></report-filter>

  <data-table
    id="reports"
    [items]="reports"
    [itemCount]="shared.reportCount"
    [indexColumn]="false"
    [pagination]="true"
    [pageLimits]="pageLimits"
    [substituteRows]="false"
    [showReloading]="true"
    [autoReload]="false"
    [header]="false"
    (reload)="reloadItems($event)">

    <data-table-column
      [header]="'Report hash'"
      [property]="'bugHash'"
      [width]="'10rem'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <span class="text-truncate" title="{{item.bugHash}}">
          {{item.bugHash}}
        </span>
      </ng-template>
    </data-table-column>

    <data-table-column
      [header]="'File'"
      [property]="'checkedFile'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <a [routerLink]="['../bug']"
          [queryParams]="{reportHash: item.bugHash, report: item.reportId}"
          queryParamsHandling="merge" class="item">{{item.checkedFile}}</a>
      </ng-template>
    </data-table-column>

    <data-table-column
      [header]="'Message'"
      [property]="'checkerMsg'"
      [sortable]="true"
      [resizable]="true">
    </data-table-column>

    <data-table-column
      [header]="'Checker name'"
      [property]="'checkerId'"
      [width]="'15rem'"
      [sortable]="true"
      [resizable]="true">
    </data-table-column>

    <data-table-column
      [header]="'Severity'"
      [property]="'severity'"
      [width]="'7rem'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <i class="cc-icon severity-{{item.severity | severityToString | lowercase}}"></i>
      </ng-template>
    </data-table-column>

    <data-table-column
      [header]="'Bug path length'"
      [property]="'bugPathLength'"
      [width]="'6rem'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <span class="bug-path-length"
          [style.background-color]="item.bugPathLength | colorizeBugPathLength">
          {{item.bugPathLength}}
        </span>
      </ng-template>
    </data-table-column>

    <data-table-column
      [header]="'Review status'"
      [property]="'status'"
      [width]="'6rem'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <i class="cc-icon review-status-{{item.reviewData?.status | reviewStatusToString | lowercase}}"></i>
      </ng-template>
    </data-table-column>

    <data-table-column
      [header]="'Detection status'"
      [property]="'detectionStatus'"
      [width]="'6rem'"
      [sortable]="true"
      [resizable]="true">
      <ng-template #dataTableCell let-item="item">
        <i *ngIf="item.detectionStatus !== undefined"
            class="cc-icon detection-status-{{item.detectionStatus | detectionStatusToString | lowercase}}"></i>
        <span *ngIf="item.detectionStatus === undefined">N/A</span>
      </ng-template>
    </data-table-column>
  </data-table>

</div>
