<div class="p-2">
  <div class="table-top">
    <form>
      <div class="form-group pull-right mx-2">
        <button class="btn btn-primary ml-2" (click)="diffSelectedRuns($event)" [attr.disabled]="baseline && newcheck ? null : ''">Diff</button>
        <button class="btn btn-primary ml-2" (click)="removeSelectedItems($event)" [attr.disabled]="itemsToRemove.length ? null : ''">Delete</button>
      </div>
    </form>

    <form class="form-inline m-2">
      <div class="form-group has-search">
        <span class="fa fa-search form-control-feedback"></span>
        <input type="text" (keyup)="search($event.target.value)" class="form-control" placeholder="Search for run names...">
      </div>
    </form>
  </div>

  <ngx-datatable
    class="runs material"
    [sortType]="'single'"
    [rows]="runs"
    [count]="runCount"
    [rowHeight]="'auto'"
    [headerHeight]="'auto'"
    [columnMode]="'force'">

    <ngx-datatable-column name="Diff" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <span class="radio">
          <label>
            <input type="radio" name="baseline" value="{{item.name}}" [(ngModel)]="baseline">
            <span class="cr">
              <i class="cr-icon fa fa-circle"></i>
            </span>
          </label>
        </span>
        <span class="radio">
          <label>
            <input type="radio" name="newcheck" value="{{item.name}}" [(ngModel)]="newcheck">
            <span class="cr">
              <i class="cr-icon fa fa-circle"></i>
            </span>
          </label>
        </span>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Name" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <a [routerLink]="['../reports']" [queryParams]="{run: item.name}"class="name">{{item.name}}</a>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Number of unresolved reports" prop="resultCount" sortable="true">
    </ngx-datatable-column>

    <ngx-datatable-column name="Storage date" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <span class="date">{{item.runDate | date:'yyyy-MM-dd HH:mm:ss'}}</span>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Analysis duration" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        {{item.duration | duration}}
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Detection status" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <ul class="detection-status-counts">
          <li *ngFor="let detectionStatusCode of (item.detectionStatusCount | mapKeys)">
            <i class="cc-icon detection-status-{{detectionStatusCode | detectionStatusToString | lowercase}}"></i>
            ({{item.detectionStatusCount.get(detectionStatusCode)}})
          </li>
        </ul>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Latest version tag" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <span class="version-tag"
          *ngIf="item.versionTag"
          [style.background-color]="item.name + ':' + item.versionTag | strToColor">
          <i class="cc-icon tag" ></i>
          <span class="name">{{item.versionTag}}</span>
        </span>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Delete" sortable="true">
      <ng-template let-item="row" ngx-datatable-cell-template>
        <div class="checkbox">
          <label>
            <input type="checkbox" value="" (change)="toggleDeleteItem(item)">
            <span class="cr">
              <i class="cr-icon fa fa-check"></i>
            </span>
          </label>
        </div>
      </ng-template>
    </ngx-datatable-column>

  </ngx-datatable>

</div>
